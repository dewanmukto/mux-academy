---
layout: default
---

<div class="course-header">
    <div class="course-hero">
        <div class="course-hero-content">
            <div class="course-meta">
                <span class="course-difficulty {{ page.course_difficulty | replace: ' ', '-' }}">
                    <i class="fas fa-signal"></i> {{ page.course_difficulty | capitalize }}
                </span>
                <span class="course-length">
                    <i class="fas fa-clock"></i> {{ page.course_length }}
                </span>
                <span class="course-access {{ page.course_access }}">
                    <i class="fas fa-{% if page.course_access == 'free' %}unlock{% else %}lock{% endif %}"></i> 
                    {{ page.course_access | capitalize }}
                </span>
            </div>
            
            <h1 class="course-title">{{ page.title }}</h1>
            <p class="course-description">{{ page.course_description }}</p>
            
            <div class="instructor-info">
                <img src="{{ page.instructor_pfp }}" alt="{{ page.instructor }}" class="instructor-avatar">
                <div class="instructor-details">
                    <h3>{{ page.instructor }}</h3>
                    <p>{{ page.instructor_bio }}</p>
                </div>
            </div>
            
            <div class="course-actions">
                <button class="btn btn-primary" onclick="startCourse()">
                    <i class="fas fa-play"></i> Start Learning
                </button>
                <button class="btn btn-secondary" onclick="toggleBookmark()">
                    <i class="far fa-bookmark"></i> Save for Later
                </button>
            </div>
        </div>
        
        <div class="course-banner">
            <img src="{{ page.course_banner }}" alt="{{ page.title }}" loading="lazy">
        </div>
    </div>
</div>

<div class="course-container">
    <aside class="course-sidebar">
        <div class="course-progress">
            <h3><i class="fas fa-chart-line"></i> Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
            </div>
            <span class="progress-text">0% Complete</span>
        </div>
        
        <div class="course-navigation">
            <h3><i class="fas fa-list"></i> Course Content</h3>
            <div id="course-toc" class="course-toc">
                <!-- Table of contents will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="course-tools">
            <h3><i class="fas fa-tools"></i> Tools</h3>
            <button class="tool-btn" onclick="toggleNotes()">
                <i class="fas fa-sticky-note"></i> Notes
            </button>
            <button class="tool-btn" onclick="downloadPDF()">
                <i class="fas fa-download"></i> Download PDF
            </button>
            <button class="tool-btn" onclick="shareCourse()">
                <i class="fas fa-share"></i> Share Course
            </button>
        </div>
    </aside>
    
    <main class="course-content">
        <div class="content-wrapper">
            {{ content }}
        </div>
        
        <div class="course-navigation-buttons">
            <button class="btn btn-secondary" onclick="previousSection()" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <button class="btn btn-primary" onclick="nextSection()">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </main>
</div>

<div id="notes-panel" class="notes-panel">
    <div class="notes-header">
        <h3><i class="fas fa-sticky-note"></i> My Notes</h3>
        <button onclick="toggleNotes()" class="close-btn">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="notes-content">
        <textarea placeholder="Take notes while learning..." id="course-notes"></textarea>
        <button class="btn btn-primary" onclick="saveNotes()">
            <i class="fas fa-save"></i> Save Notes
        </button>
    </div>
</div>

<script>
// Course-specific JavaScript
document.addEventListener('DOMContentLoaded', function() {
    generateTableOfContents();
    loadProgress();
    loadNotes();
});

function generateTableOfContents() {
    const headings = document.querySelectorAll('.course-content h1, .course-content h2, .course-content h3');
    const toc = document.getElementById('course-toc');
    
    headings.forEach((heading, index) => {
        const id = `section-${index}`;
        heading.id = id;
        
        const tocItem = document.createElement('a');
        tocItem.href = `#${id}`;
        tocItem.className = `toc-item toc-${heading.tagName.toLowerCase()}`;
        tocItem.innerHTML = `<i class="fas fa-circle"></i> ${heading.textContent}`;
        
        tocItem.addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
            updateProgress();
        });
        
        toc.appendChild(tocItem);
    });
}

function startCourse() {
    const firstSection = document.querySelector('.course-content h1, .course-content h2');
    if (firstSection) {
        firstSection.scrollIntoView({ behavior: 'smooth' });
    }
}

function toggleBookmark() {
    const btn = event.target.closest('button');
    const icon = btn.querySelector('i');
    
    if (icon.classList.contains('far')) {
        icon.classList.remove('far');
        icon.classList.add('fas');
        btn.innerHTML = '<i class="fas fa-bookmark"></i> Saved';
    } else {
        icon.classList.remove('fas');
        icon.classList.add('far');
        btn.innerHTML = '<i class="far fa-bookmark"></i> Save for Later';
    }
}

function toggleNotes() {
    const notesPanel = document.getElementById('notes-panel');
    notesPanel.classList.toggle('active');
}

function saveNotes() {
    const notes = document.getElementById('course-notes').value;
    localStorage.setItem(`notes-${window.location.pathname}`, notes);
    
    // Show success message
    const btn = event.target;
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
    setTimeout(() => {
        btn.innerHTML = originalText;
    }, 2000);
}

function loadNotes() {
    const notes = localStorage.getItem(`notes-${window.location.pathname}`);
    if (notes) {
        document.getElementById('course-notes').value = notes;
    }
}

function updateProgress() {
    // Simple progress calculation based on scroll position
    const scrollTop = window.pageYOffset;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const scrollPercent = (scrollTop / docHeight) * 100;
    
    const progressFill = document.querySelector('.progress-fill');
    const progressText = document.querySelector('.progress-text');
    
    progressFill.style.width = `${Math.min(scrollPercent, 100)}%`;
    progressText.textContent = `${Math.round(scrollPercent)}% Complete`;
    
    // Save progress
    localStorage.setItem(`progress-${window.location.pathname}`, scrollPercent);
}

function loadProgress() {
    const progress = localStorage.getItem(`progress-${window.location.pathname}`);
    if (progress) {
        const progressFill = document.querySelector('.progress-fill');
        const progressText = document.querySelector('.progress-text');
        
        progressFill.style.width = `${progress}%`;
        progressText.textContent = `${Math.round(progress)}% Complete`;
    }
}

// Track scroll for progress
window.addEventListener('scroll', updateProgress);
</script>